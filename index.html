<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÑ‡∏ü ESP32</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      margin-top: 50px;
      background: #f0f0f0;
    }
    h1 {
      color: #333;
    }
    button {
      font-size: 24px;
      padding: 12px 30px;
      margin: 20px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: 0.3s;
    }
    .on {
      background-color: #4CAF50;
      color: white;
    }
    .off {
      background-color: #f44336;
      color: white;
    }
  </style>
</head>
<body>
  <h1>üí° ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÑ‡∏ü ESP32 ‡∏ú‡πà‡∏≤‡∏ô Supabase</h1>
  <button class="on" onclick="turnOn()">‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü</button>
  <button class="off" onclick="turnOff()">‡∏õ‡∏¥‡∏î‡πÑ‡∏ü</button>

  <script>
    // ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö Supabase
    const supabaseUrl = 'https://idfzbvmyfcxxauclnmdi.supabase.co';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlkZnpidm15ZmN4eGF1Y2xubWRpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg5NTg2MzIsImV4cCI6MjA2NDUzNDYzMn0.F_i4QSWNMiZ6k7JBk5CPUuko0S6DU3ks1M77T_la9xU';
    const supabase = supabase.createClient(supabaseUrl, supabaseKey);

    async function turnOn() {
      const { error } = await supabase
        .from('switch')
        .update({ status: 'ON' })
        .eq('id', 1);
      if (error) alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + error.message);
      else alert('‚úÖ ‡πÑ‡∏ü‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß');
    }

    async function turnOff() {
      const { error } = await supabase
        .from('switch')
        .update({ status: 'OFF' })
        .eq('id', 1);
      if (error) alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + error.message);
      else alert('üî¥ ‡πÑ‡∏ü‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß');
    }
  </script>
</body>
</html>
